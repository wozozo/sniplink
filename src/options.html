<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>SnipLink Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <img class="logo-icon" src="icons/icon128.png" alt="SnipLink icon">
          <h1 class="logo-text">SnipLink Settings</h1>
        </div>
        <p class="header-subtitle">Configure how SnipLink cleans your URLs</p>
      </div>
    </header>
    
    <main class="content">
      <div class="settings-grid">
        <section class="card">
          <div class="card-header">
            <div class="card-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div>
              <h2>Custom Parameters</h2>
              <p class="card-description">Add your own tracking parameters to remove</p>
            </div>
          </div>
          
          <div class="card-content">
            <div class="input-group">
              <label for="customParams" class="input-label">One parameter per line</label>
              <textarea 
                id="customParams" 
                class="textarea" 
                rows="8" 
                placeholder="custom_param1&#10;custom_param2&#10;tracking_id&#10;source_id"
                spellcheck="false"
              ></textarea>
              <span class="input-hint">These will be removed in addition to default parameters</span>
            </div>
            
            <div class="card-actions">
              <button id="saveCustomParams" class="btn btn-primary">
                <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.3333 2H10.6667L9.33333 3.33333H6.66667C5.93333 3.33333 5.33333 3.93333 5.33333 4.66667V12.6667C5.33333 13.4 5.93333 14 6.66667 14H13.3333C14.0667 14 14.6667 13.4 14.6667 12.6667V3.33333C14.6667 2.6 14.0667 2 13.3333 2ZM10 11.3333C8.52667 11.3333 7.33333 10.14 7.33333 8.66667C7.33333 7.19333 8.52667 6 10 6C11.4733 6 12.6667 7.19333 12.6667 8.66667C12.6667 10.14 11.4733 11.3333 10 11.3333Z" fill="currentColor"/>
                </svg>
                Save Changes
              </button>
              <div id="customParamsStatus" class="status-message"></div>
            </div>
          </div>
        </section>
        
        <section class="card">
          <div class="card-header">
            <div class="card-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" fill="currentColor"/>
              </svg>
            </div>
            <div>
              <h2>Domain Whitelist</h2>
              <p class="card-description">Preserve parameters on these domains</p>
            </div>
          </div>
          
          <div class="card-content">
            <div class="input-group">
              <label for="whitelist" class="input-label">One domain per line</label>
              <textarea 
                id="whitelist" 
                class="textarea" 
                rows="5" 
                placeholder="example.com&#10;analytics.example.com&#10;app.example.com"
                spellcheck="false"
              ></textarea>
              <span class="input-hint">URLs from these domains won't be cleaned</span>
            </div>
            
            <div class="card-actions">
              <button id="saveWhitelist" class="btn btn-primary">
                <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.3333 2H10.6667L9.33333 3.33333H6.66667C5.93333 3.33333 5.33333 3.93333 5.33333 4.66667V12.6667C5.33333 13.4 5.93333 14 6.66667 14H13.3333C14.0667 14 14.6667 13.4 14.6667 12.6667V3.33333C14.6667 2.6 14.0667 2 13.3333 2ZM10 11.3333C8.52667 11.3333 7.33333 10.14 7.33333 8.66667C7.33333 7.19333 8.52667 6 10 6C11.4733 6 12.6667 7.19333 12.6667 8.66667C12.6667 10.14 11.4733 11.3333 10 11.3333Z" fill="currentColor"/>
                </svg>
                Save Changes
              </button>
              <div id="whitelistStatus" class="status-message"></div>
            </div>
          </div>
        </section>
        
        <section class="card">
          <div class="card-header">
            <div class="card-icon amazon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2ZM12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4ZM12 6C13.66 6 15 7.34 15 9C15 10.66 13.66 12 12 12C10.34 12 9 10.66 9 9C9 7.34 10.34 6 12 6ZM12 13C14.67 13 17 14.34 17 16V17H7V16C7 14.34 9.33 13 12 13Z" fill="currentColor"/>
              </svg>
            </div>
            <div>
              <h2>Amazon Associate</h2>
              <p class="card-description">Add affiliate tag to Amazon links</p>
            </div>
          </div>
          
          <div class="card-content">
            <div class="input-group">
              <label for="amazonAssociateId" class="input-label">Associate ID</label>
              <input 
                type="text" 
                id="amazonAssociateId" 
                class="input" 
                placeholder="your-associate-id-22"
                spellcheck="false"
              />
              <span class="input-hint">Will be added as ?tag= parameter to Amazon URLs</span>
            </div>
            
            <div class="card-actions">
              <button id="saveAmazonId" class="btn btn-primary">
                <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.3333 2H10.6667L9.33333 3.33333H6.66667C5.93333 3.33333 5.33333 3.93333 5.33333 4.66667V12.6667C5.33333 13.4 5.93333 14 6.66667 14H13.3333C14.0667 14 14.6667 13.4 14.6667 12.6667V3.33333C14.6667 2.6 14.0667 2 13.3333 2ZM10 11.3333C8.52667 11.3333 7.33333 10.14 7.33333 8.66667C7.33333 7.19333 8.52667 6 10 6C11.4733 6 12.6667 7.19333 12.6667 8.66667C12.6667 10.14 11.4733 11.3333 10 11.3333Z" fill="currentColor"/>
                </svg>
                Save Changes
              </button>
              <div id="amazonIdStatus" class="status-message"></div>
            </div>
          </div>
        </section>
        
        <section class="card full-width">
          <div class="card-header">
            <div class="card-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div>
              <h2>Domain-Specific Parameters</h2>
              <p class="card-description">Remove additional parameters for specific domains</p>
            </div>
          </div>
          
          <div class="card-content">
            <div class="input-group">
              <label class="input-label">Domain rules (supports wildcards like *.example.com)</label>
              <div id="domainParamsList" class="domain-params-list"></div>
              
              <div class="domain-param-add">
                <div class="domain-input-group">
                  <textarea 
                    id="newDomains" 
                    class="textarea small-textarea" 
                    rows="3" 
                    placeholder="example.com&#10;*.example.com&#10;another.com"
                    spellcheck="false"
                  ></textarea>
                  <textarea 
                    id="newDomainParams" 
                    class="textarea small-textarea" 
                    rows="3" 
                    placeholder="param1&#10;param2&#10;tracking_id"
                    spellcheck="false"
                  ></textarea>
                </div>
                <button id="addDomainParam" class="btn btn-primary">
                  <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 2V14M2 8H14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                  Add Rule
                </button>
              </div>
              
              <span class="input-hint">These parameters will be removed in addition to global parameters when visiting the specified domains</span>
            </div>
            
            <div class="card-actions">
              <div id="domainParamsStatus" class="status-message"></div>
            </div>
          </div>
        </section>

        <section class="card full-width">
          <div class="card-header">
            <div class="card-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 11H7V13H9V11ZM13 11H11V13H13V11ZM17 11H15V13H17V11ZM19 4H18V2H16V4H8V2H6V4H5C3.89 4 3.01 4.9 3.01 6L3 20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4ZM19 20H5V9H19V20Z" fill="currentColor"/>
              </svg>
            </div>
            <div>
              <h2>Default Parameters</h2>
              <p class="card-description">Toggle tracking parameters that should be removed</p>
            </div>
          </div>
          
          <div class="card-content">
            <div id="defaultParams" class="params-grid"></div>
            <div class="params-actions">
              <button id="toggleAllParams" class="btn btn-secondary">Toggle All</button>
              <div id="defaultParamsStatus" class="status-message"></div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
  <script type="module" src="options.js"></script>
</body>
</html>